<!doctype html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Radio Pforzheim – Romania FM</title>
  <meta name="theme-color" content="#E03131"/>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <style>
    :root { --bg: #0f0f14; --fg:#f8f9fa; --accent:#E03131; }
    html, body { height:100%; margin:0; background:var(--bg); color:var(--fg); font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;}
    .wrap { max-width: 720px; margin: 0 auto; padding: 24px; display:flex; flex-direction:column; gap:16px; align-items:center; }
    .card { width:100%; background:#16161d; border:1px solid #23232b; border-radius:16px; padding:20px; box-sizing:border-box; }
    h1 { margin:0; font-size:1.4rem; text-align:center; }
    .logo { width:96px; height:96px; border-radius:20px; display:block; margin:8px auto 0; }
    .controls { display:flex; gap:12px; align-items:center; justify-content:center; margin-top:10px; flex-wrap:wrap; }
    button { background:var(--accent); color:white; border:none; border-radius:999px; padding:12px 20px; font-weight:600; cursor:pointer; font-size:1rem; }
    button.secondary { background:#2b2b35; }
    .row { display:flex; align-items:center; gap:12px; justify-content:center; flex-wrap:wrap; }
    input[type=range] { width:220px; }
    .hint { opacity:.7; font-size:.9rem; text-align:center; }
    footer { opacity:.6; text-align:center; font-size:.85rem; margin-top:8px; }
    a { color:#9bc9ff; text-decoration:none; }
  </style>
</head>
<body>
  <div class="wrap">
    <img class="logo" src="icons/icon-192.png" alt="Radio Pforzheim">
    <div class="card">
      <h1>Radio Pforzheim – Romania FM</h1>
      <div class="controls">
        <button id="playBtn">▶️ Play</button>
        <button id="stopBtn" class="secondary">⏹ Stop</button>
      </div>
      <div class="row">
        <label for="vol">Volum</label>
        <input id="vol" type="range" min="0" max="1" step="0.01" value="0.9">
      </div>
      <p class="hint">Dacă nu pornește, atinge butonul <b>Play</b> (autoplay este blocat pe mobil).</p>
    </div>
    <footer>Ascultă-ne oriunde. Adaugă pe ecranul de pornire pentru o experiență ca în aplicație.</footer>
  </div>

  <audio id="player" preload="none" src="http://sapircast.caster.fm:10435/9pLwL" crossorigin="anonymous"></audio>
  <script>
    // Register service worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js').catch(console.error);
      });
    }

    const player = document.getElementById('player');
    const playBtn = document.getElementById('playBtn');
    const stopBtn = document.getElementById('stopBtn');
    const vol = document.getElementById('vol');

    let isPlaying = false;

    function updateBtn() {
      playBtn.textContent = isPlaying ? '⏸ Pauză' : '▶️ Play';
    }

    playBtn.addEventListener('click', async () => {
      if (!isPlaying) {
        try {
          await player.play();
          isPlaying = true;
          updateBtn();
        } catch (e) {
          alert('Apasă din nou Play. Unele browsere cer interacțiune înainte de redare.');
          console.error(e);
        }
      } else {
        player.pause();
        isPlaying = false;
        updateBtn();
      }
    });

    stopBtn.addEventListener('click', () => {
      player.pause();
      player.currentTime = 0;
      isPlaying = false;
      updateBtn();
    });

    vol.addEventListener('input', () => {
      player.volume = parseFloat(vol.value);
    });
  </script>
</body>
</html>
